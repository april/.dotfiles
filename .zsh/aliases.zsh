# On OS X, use mdfind -name instead of locate
if [[ `uname` == "Darwin" ]]; then
  alias locate="/usr/bin/mdfind -name $@ 2> >(grep --invert-match ' \[UserQueryParser\] ' >&2)"
  alias ldd='otool -L'
fi

# brew install bat difftastic eza zoxide
[[ ! `command -v bat` ]] || alias cat="bat -pp"
[[ ! `command -v difft` ]] || alias diff="difft"
[[ ! `command -v eza` ]] || alias l="eza --all --header --links --time-style long-iso --long --sort=modified --git"
[[ ! `command -v eza` ]] || alias ls="eza"
[[ ! `command -v zoxide` ]] || alias cd="zoxide"

alias calc='python3 -i -c "from math import *"'
alias dotfiles='git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'
alias ll="l"

unalias du 2>/dev/null

h() {
  history 0 | grep -i $1
}

sc() {
  openssl s_client -connect $1:443 -servername $1 "${@:2}"
}

headers() {
  curl -s -o /dev/null -D - "$@" | grep -v -e '^[[:space:]]*$' | tail -n +2 | sort --ignore-case
}

# pretty sudo prompt
read -r -d '' SUDOPROMPT << EOM
ðŸŒºðŸŒ³ðŸŒ¸ðŸŒ·ðŸŒ·ðŸŒ¸ðŸŒ»ðŸŒ·ðŸŒ·ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ·ðŸŒ¼ðŸŒ·ðŸŒ³ðŸŒºðŸŒ¼ðŸŒºðŸŒ¸ðŸŒ»ðŸŒ¼ðŸŒ¼ðŸŒ³ðŸŒ³ðŸŒ¼ðŸŒºðŸŒ»ðŸŒ·ðŸ›ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒ³ðŸŒ¸ðŸŒ·ðŸŒ·ðŸŒ»ðŸŒ¸
ðŸŒ¸ðŸ¦‰ðŸŒ»ðŸŒ¸ðŸŒ³ðŸŒ·ðŸŒ¸ðŸŒ·ðŸŒ¸ðŸŒ³ðŸŒ¸ðŸŒ»ðŸŒ³ðŸŒðŸŒ»ðŸŒ·ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒºðŸŒºðŸŒ»ðŸŒ¼ðŸŒ»ðŸŒ»ðŸŒ¼ðŸŒºðŸŒ»ðŸŒ³ðŸŒ¼ðŸŒ³ðŸŒºðŸŒ³ðŸŒ·ðŸŒ»ðŸŒ¼ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒ¸
ðŸŒ³ðŸŒ¸ðŸŒ»ðŸŒºðŸŒ»ðŸŒ³ðŸŒºðŸŒºðŸŒ»ðŸŒºðŸŒ¸ðŸŒ»ðŸŒ·ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ»ðŸŒ»ðŸŒ·ðŸŒ³ðŸŒ»ðŸŒ¸ðŸŒ³ðŸŒ·ðŸŒ»ðŸŒ³ðŸŒ³ðŸŒ³ðŸŒ³ðŸŒ¼ðŸŒ³ðŸŒ³ðŸŒºðŸŒ·ðŸŒ³ðŸŒºðŸŒ³ðŸŒº
ðŸ¦‰ðŸŒ¸ðŸŒ»ðŸŒºðŸŒºðŸŒ³ðŸŒ¸ðŸŒ¸ðŸŒ¼ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ·ðŸŒ¸ðŸŒ³ðŸŒ¼ðŸŒºðŸŒ¸ðŸŒºðŸŒ·ðŸŒ»ðŸŒ·ðŸŒºðŸŒºðŸŒ³ðŸŒ·ðŸŒ·ðŸ°ðŸŒ¸ðŸŒ»ðŸŒ³ðŸŒ¸ðŸŒ¼ðŸŒ·ðŸŒ¼ðŸŒ³ðŸŒ·ðŸ¹ðŸŒ¼ðŸŒº
ðŸŒ·ðŸŒ³ðŸŒ»ðŸŒ¸ðŸŒ¸ðŸŒ¼ðŸ°ðŸŒ·ðŸŒºðŸŒ·ðŸŒºðŸŒ»ðŸŒ·ðŸŒ¸ðŸŒºðŸŒ»ðŸŒ³ðŸŒ»ðŸŒ·ðŸŒ»ðŸŒ»ðŸŒºðŸŒ¸ðŸŒ¸ðŸŒºðŸŒ»ðŸŒ¸ðŸŒ»ðŸŒ³ðŸŒ³ðŸŒ»ðŸ¦ðŸŒ»ðŸŒ¼ðŸŒ¼ðŸŒ»ðŸŒ»ðŸŒºðŸŒ³ðŸ°
ðŸŒ¼ðŸ¦ðŸŒ»ðŸŒ³ðŸŒ¸ðŸŒ¸ðŸŒ³ðŸŒ·ðŸŒºðŸŒ¼ðŸŒ³ðŸŒ·ðŸŒ¸ðŸŒ»ðŸŒ¼ðŸŒ»ðŸ›ðŸŒ»ðŸŒ¼ðŸŒ·ðŸŒºðŸŒ¼ðŸŒºðŸŒ¸ðŸŒºðŸ¦”ðŸŒ·ðŸŒ¸ðŸŒ·ðŸŒ»ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ·ðŸŒðŸŒ¸ðŸŒ·ðŸŒ¼ðŸŒ¸ðŸ¹
ðŸŒ¸ðŸŒ³ðŸŒ»ðŸŒ¼ðŸŒ»ðŸŒ³ðŸŒ¸ðŸŒ·ðŸŒºðŸŒ·ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒ·ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ¼ðŸŒ³ðŸŒ¸ðŸŒ»ðŸŒ»ðŸŒ¸ðŸŒ¼ðŸŒ¼ðŸŒ¸ðŸŒ³ðŸŒºðŸŒ»ðŸŒ»ðŸŒ³ðŸŒºðŸŒ·ðŸ°ðŸŒ»ðŸŒ¼ðŸ¹ðŸŒ·ðŸŒ·ðŸŒ³
ðŸŒ¼ðŸŒ·ðŸŒ»ðŸŒ¸ðŸŒ¼ðŸŒ³ðŸŒ»ðŸŒ»ðŸŒ³ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒºðŸŒºðŸŒºðŸŒºðŸŒºðŸŒ³ðŸŒ»ðŸŒ¼ðŸŒ·ðŸŒ¸ðŸŒ¸ðŸŒ»ðŸŒºðŸŒ»ðŸŒ³ðŸŒ¸ðŸŒ·ðŸŒºðŸŒºðŸŒ¼ðŸŒ¸ðŸŒºðŸŒ»ðŸŒ»ðŸŒ·ðŸŒ¸ðŸŒ»ðŸŒ·
ðŸŒ¼ðŸŒ³ðŸŒ·ðŸŒ³ðŸŒ¸ðŸŒºðŸŒ»ðŸŒ³â€¯â€¯â€¯â€¯                           â€¯â€¯         â€¯â€¯â€¯â€¯ðŸŒºðŸŒ¸ðŸŒ»ðŸ¢ðŸŒºðŸŒ³ðŸŒ»ðŸŒºðŸŒ¼
ðŸŒ·ðŸŒ·ðŸŒºðŸŒ³ðŸŒ¼ðŸŒ¸ðŸŒ»ðŸŒ¸â€¯â€¯â€¯â€¯ please enter ur password,â€¯cutie pie â€¯â€¯â€¯â€¯â€¯ðŸŒ·ðŸŒºðŸŒ¼ðŸŒ·ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ·ðŸŒº
ðŸŒºðŸŒºðŸŒ»ðŸŒ¼ðŸŒ»ðŸŒ»ðŸŒ·ðŸŒ»â€¯â€¯â€¯â€¯                           â€¯â€¯         â€¯â€¯â€¯â€¯ðŸŒ¼ðŸŒ·ðŸŒ¸ðŸŒ·ðŸŒºðŸŒ·ðŸŒ¸ðŸŒ³ðŸŒ¸
ðŸŒ³ðŸŒ¼ðŸŒ¼ðŸŒ¼ðŸŒ»ðŸŒºðŸŒºðŸŒºðŸŒ¼ðŸŒºðŸŒ¼ðŸŒ»ðŸŒºðŸ¦‰ðŸŒºðŸŒ¸ðŸŒ¸ðŸŒ³ðŸŒ³ðŸŒ³ðŸŒ·ðŸŒ¸ðŸŒºðŸŒ·ðŸŒ¼ðŸŒ¼ðŸŒºðŸ›ðŸŒ·ðŸŒ¸ðŸŒ¸ðŸŒºðŸŒ»ðŸŒ¸ðŸŒºðŸŒºðŸŒ·ðŸŒ·ðŸŒ»ðŸŒº
ðŸŒ³ðŸŒ³ðŸŒ·ðŸŒ·ðŸ¢ðŸŒ³ðŸŒ¼ðŸŒºðŸŒ¼ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ·ðŸŒ»ðŸŒ¸ðŸŒ»ðŸŒºðŸŒ·ðŸŒ³ðŸŒºðŸŒ»ðŸŒºðŸŒ¼ðŸŒ·ðŸŒ·ðŸŒ³ðŸŒºðŸŒ¸ðŸŒ¸ðŸŒ»ðŸŒ·ðŸŒ·ðŸŒ³ðŸŒ³ðŸŒ»ðŸŒ¸ðŸŒ»ðŸŒ¼ðŸŒ¼ðŸŒ·
ðŸŒ¼ðŸŒ¸ðŸŒ³ðŸŒ»ðŸŒ»ðŸŒ³ðŸŒ¼ðŸŒ»ðŸŒ¸ðŸŒ»ðŸŒ¸ðŸŒ·ðŸŒºðŸŒ·ðŸŒ³ðŸŒ»ðŸŒ¼ðŸŒðŸŒ¼ðŸŒ³ðŸŒºðŸŒ·ðŸŒ·ðŸŒ¼ðŸŒ·ðŸŒ·ðŸ¦”ðŸŒ»ðŸŒ·ðŸŒ¸ðŸŒ¼ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒ·ðŸŒ·ðŸŒºðŸŒ»ðŸŒ·ðŸŒ·
ðŸŒ¸ðŸŒ»ðŸŒ·ðŸŒ·ðŸ¦‰ðŸŒ»ðŸŒ»ðŸŒ¼ðŸŒºðŸŒ»ðŸŒ³ðŸŒ»ðŸŒ¸ðŸŒ·ðŸŒ·ðŸŒ»ðŸŒ³ðŸŒ»ðŸŒºðŸŒºðŸŒ¼ðŸŒ·ðŸŒ³ðŸŒ¼ðŸŒ·ðŸŒ¸ðŸŒ¼ðŸŒ»ðŸŒ»ðŸŒ·ðŸŒºðŸŒ·ðŸŒ»ðŸŒ·ðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒ·ðŸŒºðŸŒº
ðŸŒ³ðŸŒºðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒºðŸŒ¸ðŸŒºðŸŒ³ðŸŒ»ðŸŒ¸ðŸ£ðŸŒ»ðŸŒ¼ðŸŒ»ðŸŒ·ðŸŒ¸ðŸŒ¼ðŸŒºðŸŒ³ðŸŒ³ðŸŒ¸ðŸŒ·ðŸŒ¸ðŸŒ»ðŸŒ¸ðŸŒ·ðŸŒ»ðŸŒ¸ðŸŒ³ðŸŒ»ðŸŒºðŸŒ³ðŸŒºðŸŒ·ðŸŒºðŸŒ¼ðŸŒ³ðŸŒ³ðŸŒ·
ðŸŒ³ðŸŒ·ðŸŒ·ðŸ¹ðŸŒºðŸŒ¸ðŸŒ¼ðŸŒºðŸŒºðŸŒ¼ðŸŒºðŸŒ¸ðŸŒ¸ðŸŒ³ðŸŒ³ðŸŒ³ðŸŒ¼ðŸŒ»ðŸŒ³ðŸŒ»ðŸŒ·ðŸŒ·ðŸŒ¼ðŸŒ¼ðŸŒ³ðŸŒºðŸŒ·ðŸŒ»ðŸŒ³ðŸŒ¸ðŸŒ»ðŸŒºðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ·ðŸŒ»ðŸŒ»ðŸŒ¸ðŸŒ¼
ðŸŒ¼ðŸŒ³ðŸŒ¸ðŸ¦ðŸŒºðŸŒºðŸŒ·ðŸŒ¼ðŸŒ»ðŸŒºðŸŒ¼ðŸŒ·ðŸŒ»ðŸŒ¸ðŸŒ·ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¸ðŸŒ¼ðŸŒºðŸŒ»ðŸŒºðŸ¢ðŸŒ³ðŸŒ¼ðŸŒ»ðŸŒºðŸŒºðŸŒºðŸ¹ðŸŒ³ðŸŒ¸ðŸŒ¸ðŸŒ¼ðŸŒ³ðŸŒ»ðŸŒ»ðŸŒºðŸŒ»
ðŸŒ·ðŸŒ¼ðŸŒ¸ðŸŒ¼ðŸŒ³ðŸŒºðŸŒºðŸ¦”ðŸŒ»ðŸŒ¼ðŸŒ»ðŸŒ¸ðŸŒ¼ðŸŒºðŸŒºðŸŒ»ðŸŒ¼ðŸŒ·ðŸŒ¼ðŸŒ³ðŸŒºðŸŒºðŸŒ·ðŸŒ»ðŸŒ·ðŸŒðŸŒ¸ðŸŒ·ðŸŒ·ðŸŒ³ðŸŒºðŸŒºðŸŒ·ðŸŒ¸ðŸŒ³ðŸŒ»ðŸŒ³ðŸŒ»ðŸŒ¸ðŸŒ¸

ðŸ¥° ps i love u ðŸ¥° :Â 
EOM

alias prettyplease="sudo -p '$SUDOPROMPT'"

mansplain() {
  user=`echo $USER | tr "[:lower:]" "[:upper:]"`

  # ugh, macos vs linux
  if command -v gzcat
  then
    _cat() { gzcat $@; }
  else
    _cat() { zcat $@; }
  fi

  # set pager if not set
  if [ -z ${PAGER+x} ]; then PAGER=less; fi

  _cat --force `man -w $1` | sed -E -e "s/\.SH \"?NAME\"?/.SH \"WELL ACTUALLY, $user, LET ME EXPLAIN...\"/" | groff -man -Tutf8 | $PAGER
}


git-log-json() {
  IFS='' read -r -d '' FORMAT << 'EOF'
  {
  ^^^^author^^^^: { ^^^^name^^^^: ^^^^%aN^^^^,
    ^^^^email^^^^: ^^^^%aE^^^^,
    ^^^^date^^^^: ^^^^%aD^^^^,
    ^^^^dateISO8601^^^^: ^^^^%aI^^^^},
  ^^^^body^^^^: ^^^^%b^^^^,
  ^^^^commitHash^^^^: ^^^^%H^^^^,
  ^^^^commitHashAbbreviated^^^^: ^^^^%h^^^^,
  ^^^^committer^^^^: {
    ^^^^name^^^^: ^^^^%cN^^^^,
    ^^^^email^^^^: ^^^^%cE^^^^,
    ^^^^date^^^^: ^^^^%cD^^^^,
    ^^^^dateISO8601^^^^: ^^^^%cI^^^^},
  ^^^^encoding^^^^: ^^^^%e^^^^,
  ^^^^notes^^^^: ^^^^%N^^^^,
  ^^^^parent^^^^: ^^^^%P^^^^,
  ^^^^parentAbbreviated^^^^: ^^^^%p^^^^,
  ^^^^refs^^^^: ^^^^%D^^^^,
  ^^^^signature^^^^: {
    ^^^^key^^^^: ^^^^%GK^^^^,
  ^^^^signer^^^^: ^^^^%GS^^^^,
  ^^^^verificationFlag^^^^: ^^^^%G?^^^^},
  ^^^^subject^^^^: ^^^^%s^^^^,
  ^^^^subjectSanitized^^^^: ^^^^%f^^^^,
  ^^^^tree^^^^: ^^^^%T^^^^,
  ^^^^treeAbbreviated^^^^: ^^^^%t^^^^
  },
EOF
  FORMAT=$(echo $FORMAT|tr -d '\r\n ')

  git log --pretty=format:$FORMAT $1 | \
  sed -e ':a' -e 'N' -e '$!ba' -e s'/\^^^^},\n{\^^^^/^^^^},{\^^^^/g' \
      -e 's/\\/\\\\/g' -e 's/"/\\"/g' -e 's/\^^^^/"/g' -e '$ s/,$//' | \
  sed -e ':a' -e 'N' -e '$!ba' -e 's/\r//g' -e 's/\n/\\n/g' -e 's/\t/\\t/g' | \
  awk 'BEGIN { ORS=""; printf("[") } { print($0) } END { printf("]\n") }'
}
